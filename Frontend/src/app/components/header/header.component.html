<mat-toolbar color="primary">
  <!-- Sidebar Toggle Button (only show when authenticated) -->
  @if (isAuthenticated$ | async) {
    <button mat-icon-button (click)="toggleSidebar()" class="sidebar-toggle">
      <mat-icon>{{ (isSidebarCollapsed$ | async) ? 'menu' : 'menu_open' }}</mat-icon>
    </button>
  }
  
  <span>{{ title }}</span>
  <span class="spacer"></span>
  
  <!-- Navigation Links -->
  <button mat-button routerLink="/">Home</button>
  
  @if (isAuthenticated$ | async) {
    <button mat-button routerLink="/videos">Videos</button>
    <button mat-button routerLink="/channels">Channels</button>
    <button mat-button routerLink="/my-channels">My Channels</button>
  }
  
  <!-- Authenticated User Menu -->
  @if (isAuthenticated$ | async) {
    <button mat-button routerLink="/favorites">Favorites</button>
    <button mat-button routerLink="/upload">Upload</button>
    
    <button mat-icon-button [matMenuTriggerFor]="userMenu">
      <mat-icon>account_circle</mat-icon>
    </button>
    
    <mat-menu #userMenu="matMenu">
      <div class="user-info">
        @if (currentUser$ | async; as user) {
          <div class="user-welcome">
            <p class="welcome-text">Welcome, {{ user.firstName }}!</p>
            <p class="user-email">{{ user.email }}</p>
          </div>
        }
      </div>
      <mat-divider></mat-divider>
      <button mat-menu-item routerLink="/profile">
        <mat-icon>person</mat-icon>
        <span>Profile</span>
      </button>
      <button mat-menu-item routerLink="/channel/create">
        <mat-icon>add_circle</mat-icon>
        <span>Create Channel</span>
      </button>
      <button mat-menu-item routerLink="/invites">
        <mat-icon>mail</mat-icon>
        <span>Invite Friends</span>
      </button>
      <button mat-menu-item routerLink="/referrals">
        <mat-icon>people</mat-icon>
        <span>Referrals</span>
      </button>
      <button mat-menu-item routerLink="/settings">
        <mat-icon>settings</mat-icon>
        <span>Settings</span>
      </button>
      <mat-divider></mat-divider>
      <button mat-menu-item (click)="logout()">
        <mat-icon>logout</mat-icon>
        <span>Logout</span>
      </button>
    </mat-menu>
  } @else {
    <!-- Guest User -->
    <button mat-button routerLink="/login">Login</button>
    <button mat-button routerLink="/register">Register</button>
  }
</mat-toolbar>

