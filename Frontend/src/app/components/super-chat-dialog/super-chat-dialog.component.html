<div class="super-chat-dialog">
  <h2 mat-dialog-title>
    <mat-icon>favorite</mat-icon>
    Super Chat - {{ data.liveStreamTitle }}
  </h2>
  
  <mat-dialog-content>
    <form [formGroup]="superChatForm" class="super-chat-form">
      <!-- Amount Selection -->
      <div class="amount-selection">
        <h3>Choose Amount</h3>
        <div class="tier-buttons">
          <button 
            *ngFor="let tier of SUPER_CHAT_TIERS" 
            type="button"
            class="tier-button"
            [class.selected]="selectedTier === tier"
            [style.background-color]="tier.color"
            (click)="selectTier(tier)">
            <span class="tier-amount">${{ tier.amount }}</span>
            <span class="tier-label">{{ tier.label }}</span>
            <span class="tier-duration">{{ tier.duration }}s</span>
          </button>
        </div>
        
        <mat-form-field appearance="outline" class="custom-amount">
          <mat-label>Custom Amount</mat-label>
          <input matInput type="number" formControlName="amount" placeholder="Enter amount" min="1" step="0.01">
          <mat-icon matSuffix>attach_money</mat-icon>
        </mat-form-field>
      </div>

      <!-- Donor Information -->
      <div class="donor-info">
        <h3>Your Information</h3>
        
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Your Name</mat-label>
          <input matInput formControlName="donorName" placeholder="Enter your name">
          <mat-icon matSuffix>person</mat-icon>
        </mat-form-field>

        <mat-checkbox formControlName="isAnonymous" class="anonymous-checkbox">
          <mat-icon>visibility_off</mat-icon>
          Send anonymously
        </mat-checkbox>
      </div>

      <!-- Message -->
      <div class="message-section">
        <h3>Message (Optional)</h3>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Your message</mat-label>
          <textarea 
            matInput 
            formControlName="donorMessage" 
            placeholder="Say something to the streamer..."
            rows="3"
            maxlength="200">
          </textarea>
          <mat-hint align="end">{{ superChatForm.get('donorMessage')?.value?.length || 0 }}/200</mat-hint>
        </mat-form-field>
      </div>

      <!-- Preview -->
      <div class="preview-section" *ngIf="selectedTier">
        <h3>Preview</h3>
        <div class="super-chat-preview" [style.background-color]="selectedTier.color">
          <div class="preview-header">
            <span class="preview-name">{{ superChatForm.get('donorName')?.value || 'Your Name' }}</span>
            <span class="preview-amount">${{ superChatForm.get('amount')?.value || selectedTier.amount }}</span>
          </div>
          <div class="preview-message" *ngIf="superChatForm.get('donorMessage')?.value">
            {{ superChatForm.get('donorMessage')?.value }}
          </div>
        </div>
      </div>
    </form>
  </mat-dialog-content>
  
  <mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">Cancel</button>
    <button 
      mat-raised-button 
      color="primary" 
      (click)="sendSuperChat()"
      [disabled]="superChatForm.invalid || isProcessing">
      <mat-icon *ngIf="!isProcessing">favorite</mat-icon>
      <mat-icon *ngIf="isProcessing">hourglass_empty</mat-icon>
      {{ isProcessing ? 'Processing...' : 'Send Super Chat' }}
    </button>
  </mat-dialog-actions>
</div>
